<!-- admin.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Panel</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    function confirmDelete(type, id) {
      if (confirm("Are you sure you want to delete this entry?")) {
        window.location.href = `/delete/${type}/${id}`;
      }
    }

    function filterTable(inputId, tableId) {
      const input = document.getElementById(inputId).value.toLowerCase();
      const rows = document.querySelectorAll(`#${tableId} tbody tr`);
      rows.forEach(row => {
        const text = row.innerText.toLowerCase();
        row.style.display = text.includes(input) ? '' : 'none';
      });
    }
  </script>
</head>
<body class="bg-gray-100 p-6">
  <div class="max-w-7xl mx-auto">
    <h1 class="text-3xl font-bold text-center text-red-600 mb-6">Admin Panel</h1>

    <div class="mb-10">
      <h2 class="text-xl font-semibold mb-2">Donors</h2>
      <input id="donorFilter" onkeyup="filterTable('donorFilter', 'donorTable')" placeholder="Search Donors..." class="mb-2 p-2 border rounded w-full max-w-xs">
      <table id="donorTable" class="w-full table-auto bg-white shadow rounded overflow-hidden text-sm">
        <thead class="bg-red-100">
          <tr>
            <th class="px-2 py-1">Name</th>
            <th class="px-2 py-1">Blood</th>
            <th class="px-2 py-1">City</th>
            <th class="px-2 py-1">Phone</th>
            <th class="px-2 py-1">Action</th>
          </tr>
        </thead>
        <tbody>
          {% for donor in donors %}
          <tr class="border-b">
            <td class="px-2 py-1">{{ donor.name }}</td>
            <td class="px-2 py-1">{{ donor.blood_type }}</td>
            <td class="px-2 py-1">{{ donor.city }}</td>
            <td class="px-2 py-1">{{ donor.phone }}</td>
            <td class="px-2 py-1 text-center">
              <button onclick="confirmDelete('donor', {{ donor.id }})" class="bg-red-500 text-white px-2 py-1 rounded text-xs">Delete</button>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div>
      <h2 class="text-xl font-semibold mb-2">Receivers</h2>
      <input id="receiverFilter" onkeyup="filterTable('receiverFilter', 'receiverTable')" placeholder="Search Receivers..." class="mb-2 p-2 border rounded w-full max-w-xs">
      <table id="receiverTable" class="w-full table-auto bg-white shadow rounded overflow-hidden text-sm">
        <thead class="bg-green-100">
          <tr>
            <th class="px-2 py-1">Name</th>
            <th class="px-2 py-1">Blood</th>
            <th class="px-2 py-1">City</th>
            <th class="px-2 py-1">Phone</th>
            <th class="px-2 py-1">Action</th>
          </tr>
        </thead>
        <tbody>
          {% for receiver in receivers %}
          <tr class="border-b">
            <td class="px-2 py-1">{{ receiver.name }}</td>
            <td class="px-2 py-1">{{ receiver.blood_type }}</td>
            <td class="px-2 py-1">{{ receiver.city }}</td>
            <td class="px-2 py-1">{{ receiver.phone }}</td>
            <td class="px-2 py-1 text-center">
              <button onclick="confirmDelete('receiver', {{ receiver.id }})" class="bg-red-500 text-white px-2 py-1 rounded text-xs">Delete</button>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</body>
</html>
